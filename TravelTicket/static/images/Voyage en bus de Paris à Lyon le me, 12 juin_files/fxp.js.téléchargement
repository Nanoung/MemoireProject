((t,n)=>{t.dataLayer=t.dataLayer||[],t.fxp=t.fxp||[];const i={webc_fxp_1347:`return document.querySelector('[class*="includedLuggage-module"]')!==null;`,webc_fxp_1397:`return document.querySelector('#tripDetails[aria-busy="false"]')&&!/^((?!chrome|android).)*safari/i.test(navigator.userAgent);`,webc_fxp_1473:`return document.querySelector('[data-e2e="productListItem-emptySeatReservation"]');`,webc_fxp_1594:`return location.pathname!=="/search"||!document.querySelector('[data-e2e="search-result-list"]')?!1:document.querySelector("#search-mask-trip-mode-oneway-toggle:checked")!==null;`,webc_fxp_1598:'var shopSeatsPanel=document.getElementById("shop-seats-panel");let globalEvents=globalEventsCache.find(e=>e.name==="checkout.init");if(!globalEvents)return!1;let currency=globalEvents.payload[0].payload.cart.currency;return!!(shopSeatsPanel&&!shopSeatsPanel.hasAttribute("hidden")&&(currency==="GBP"||currency==="USD"));',webc_station_location_map:'let domain=document.location.hostname;if(!window.globalEventsCache)return!1;let event=[...window.globalEventsCache].reverse().find(e=>e.name==="search.results.results_visible");if(!event||event.payload[0].results<10)return!1;switch(domain){case"shop.flixbus.com":case"shop.greyhound.com":case"shop.global.flixbus.com":if(document.documentElement.lang.substring(0,2)!="en")return!1;if(event.payload[0].searchInfo.fromCity.name=="New York, NY"||event.payload[0].searchInfo.toCity.name=="New York, NY")return!0;break;case"shop.flixbus.de":if(event.payload[0].searchInfo.fromCity.name=="Berlin"||event.payload[0].searchInfo.toCity.name=="Berlin")return!0;break;case"shop.flixbus.fr":if(event.payload[0].searchInfo.fromCity.name=="Paris"||event.payload[0].searchInfo.toCity.name=="Paris")return!0;break;case"shop.flixbus.pl":if(event.payload[0].searchInfo.fromCity.name=="Warsaw"||event.payload[0].searchInfo.toCity.name=="Warsaw")return!0;break;default:return!1}',webc_fxp_1689:`const unselectable=document.querySelectorAll('#shop-seats-panel[class*="hcr-panel--active"] [class*="seats-module-unselectableIcon"]');return unselectable.length<1?!1:((!window.fxp1689||unselectable.length!==window.fxp1689)&&(window.fxp1689=unselectable.length,dataLayer.push({event:"ga_event",eventCategory:"ABTest",eventAction:"fxp1689_unselectable_seats",eventLabel:unselectable.length,eventValue:void 0,eventProperty:void 0})),!0);`,webc_fxp_1705:`return document.querySelector('[class*="seatTooltip-module-emptySeat"]');`,webc_fxp_1713:'return document.querySelector("#the-map");',webc_fxp_1715:'return location.pathname==="/";',webc_fxp_1730:`return document.querySelector('[data-product-type="bike_slot"]');`,webc_fxp_1731:'return globalEventsCache.find(e=>e.name==="search.results.results_visible")!==void 0;',webc_fxp_1732:'return location.pathname==="/booking/success"&&window.formbricks;',webc_book_cart_trip_ab_test:'return location.pathname==="/checkout";',webc_fxp_1767:'var shopSeatsPanel=document.getElementById("shop-seats-panel");return shopSeatsPanel&&!shopSeatsPanel.hasAttribute("hidden")?document.querySelectorAll(".flix-passenger-input_gender").length>0:!1;',webc_fxp_1771:'return location.pathname==="/booking/success"&&window.formbricks;'},s={webc_fxp_1347:[[],[`((d)=>{if(!d.getElementById("fxp-2f26a044-b7ec-4ec3-a731-96eed127246e")){var s=d.createElement("style");s.id="fxp-2f26a044-b7ec-4ec3-a731-96eed127246e";d.head.appendChild(s).innerText='.flix-checkout-section-content [class*=includedLuggage-module]:has([class*="includedLuggage-module-productIconContainer"]){border:none;padding:0 0 var(--hcr-spacing-3) 15px}[class*=includedLuggage-module-productIconContainer]{display:none}[class*=hcr-box][class*=includedLuggage-module-containerHoverr]{border:1px solid var(--hcr-line-primary-color);border-radius:var(--hcr-primary-border-radius)}[class*=includedLuggage-module-title]:after{content:var(--flix-icon-checkmark-solid);display:inline-block;width:20px;vertical-align:text-top;padding-left:2px}';}})(document);`]],webc_fxp_1397:[[],[`((d)=>{if(!d.getElementById("fxp-7fe7c953-b4b3-4be1-8dd6-bca2d161226e")){var s=d.createElement("style");s.id="fxp-7fe7c953-b4b3-4be1-8dd6-bca2d161226e";d.head.appendChild(s).innerText='#tripDetails [class*=hcr-panel__body],#station-detail-panel [class*=hcr-panel__body]{top:50%;right:50%;transform:translate(50%,-50%);border-radius:var(--hcr-primary-border-radius);width:410px;max-width:min(95vw,410px);height:max-content;max-height:90vh}';}})(document);`]],webc_fxp_1473:[[],[]],webc_fxp_1594:[[],['(()=>{if(document.querySelector(".fxp1594-banner"))return;const r=document.querySelector(\'[data-e2e="search-result-list"]\'),a=document.createElement("li");let n="https://pulse.cro.flixbus.com/abtests/1594/busreturn.png";location.hostname.includes("greyhound")&&(n="https://pulse.cro.flixbus.com/abtests/1594/ghreturn.svg");let e=null,t=null;switch(document.documentElement.lang.substring(0,2)){case"en":e="Make it a round trip!",t="Save by booking your return trip now";break;case"de":e="Mach eine Rundreise!",t="Spare, indem Du Deine R\\xFCckreise jetzt buchst";break;case"es":e="\\xA1Haz un viaje de ida y vuelta!",t="Ahorra reservando ahora tu viaje de vuelta";break;case"it":e="Rendi la tua prenotazione andata e ritorno!",t="Risparmia acquistando subito il viaggio di ritorno";break;case"pl":e="Podr\\xF3\\u017C w obie strony!",t="Zarezerwuj podr\\xF3\\u017C powrotn\\u0105 ju\\u017C teraz";break;case"pt":e="Faz uma viagem de ida e volta!",t="Poupa ao reservar j\\xE1 a tua viagem de regresso";break;case"fr":e="Faire un aller-retour !",t="\\xC9conomisez en r\\xE9servant d\\xE8s maintenant votre voyage retour";break;case"cs":e="Napl\\xE1nujte si i zp\\xE1te\\u010Dn\\xED cestu!",t="Zarezervujte si nyn\\xED zp\\xE1te\\u010Dn\\xED cestu a u\\u0161et\\u0159ete";break;default:return}a.innerHTML=`<img src="${n}" aria-hidden="true" class="fxp1594-bus"></img><div class="fxp1594-text"><h3 class="flix-h3 flix-h3--space-flush">${e}</h3><p class="flix-text">${t}</p></div>`,a.classList.add("fxp1594-banner"),a.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),dataLayer.push({event:"ga_event",eventCategory:"ABTest",eventAction:"fxp1594_banner_clicked",eventLabel:void 0,eventValue:void 0,eventProperty:void 0}),setTimeout(()=>{document.querySelector("#dateInput-to").click()},"200"),document.querySelector(\'label[for="search-mask-trip-mode-roundtrip-toggle"]\').click()}),r.childElementCount<5?r.append(a):r.insertBefore(a,r.childNodes[4])})();',`((d)=>{if(!d.getElementById("fxp-017bcf51-c6a9-4176-913c-48ef91ed2f4f")){var s=d.createElement("style");s.id="fxp-017bcf51-c6a9-4176-913c-48ef91ed2f4f";d.head.appendChild(s).innerText='.fxp1594-banner{margin:0 0 var(--hcr-spacing-2) 0;padding:var(--hcr-spacing-2) 46px var(--hcr-spacing-2) 6px;background:var(--hcr-bg-primary-color);border:1px solid var(--hcr-grayscale-30-color);border-radius:var(--hcr-primary-border-radius);position:relative;display:flex;cursor:pointer}.fxp1594-banner:hover{box-shadow:var(--flix-primary-box-shadow)}.fxp1594-banner:after{display:inline-block;width:var(--flix-spacing-6, 36px);height:var(--flix-spacing-6, 36px);background-size:24px;background-size:var(--flix-spacing-4);content:"";vertical-align:middle;position:absolute;top:50%;right:12px;right:var(--flix-spacing-2);margin-top:-18px;background:var(--flix-icon-arrow-right) no-repeat center}.fxp1594-bus{height:75px;padding-right:6px}.fxp1594-text{margin:auto 0}.fxp1594-text .flix-text{margin:0}';}})(document);`],['(()=>{if(document.querySelector(".fxp1594-banner"))return;const n=document.querySelector(\'[data-e2e="search-result-list"]\'),r=document.createElement("li");let i="https://pulse.cro.flixbus.com/abtests/1594/busreturn.png";location.hostname.includes("greyhound")&&(i="https://pulse.cro.flixbus.com/abtests/1594/ghreturn.svg");let e=null,t=null,a=null;switch(document.documentElement.lang.substring(0,2)){case"en":e="Make it a round trip!",t="Save by booking your return trip now",a="Add a Return Trip";break;case"de":e="Mach eine Rundreise!",t="Spare, indem Du Deine R\\xFCckreise jetzt buchst",a="R\\xFCckfahrt hinzuf\\xFCgen";break;case"es":e="\\xA1Haz un viaje de ida y vuelta!",t="Ahorra reservando ahora tu viaje de vuelta",a="A\\xF1adir el trayecto de vuelta";break;case"it":e="Rendi la tua prenotazione andata e ritorno!",t="Risparmia acquistando subito il viaggio di ritorno",a="Aggiungi un viaggio di ritorno";break;case"pl":e="Podr\\xF3\\u017C w obie strony!",t="Zarezerwuj podr\\xF3\\u017C powrotn\\u0105 ju\\u017C teraz",a="Dodaj podr\\xF3\\u017C powrotn\\u0105";break;case"pt":e="Faz uma viagem de ida e volta!",t="Poupa ao reservar j\\xE1 a tua viagem de regresso",a="Adicionar uma viagem de volta";break;case"fr":e="Faire un aller-retour !",t="\\xC9conomisez en r\\xE9servant d\\xE8s maintenant votre voyage retour",a="Ajouter un trajet retour";break;case"cs":e="Napl\\xE1nujte si i zp\\xE1te\\u010Dn\\xED cestu!",t="Zarezervujte si nyn\\xED zp\\xE1te\\u010Dn\\xED cestu a u\\u0161et\\u0159ete",a="P\\u0159idat zp\\xE1te\\u010Dn\\xED cestu";break;default:return}r.innerHTML=`<img src="${i}" aria-hidden="true" class="fxp1594-bus"></img><div class="fxp1594-text"><h3 class="flix-h3 flix-h3--space-flush">${e}</h3><p class="flix-text">${t}</p></div><div class="fxp1594-button-container"><button class="flix-btn fxp1594-button">${a}<img src="https://honeycomb-icons.hive.flixbus.com/7.2.1/svg/arrow-right.svg" aria-hidden="true" class="fxp1594-arrow"></img></button></div>`,r.classList.add("fxp1594-banner"),r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),dataLayer.push({event:"ga_event",eventCategory:"ABTest",eventAction:"fxp1594_banner_clicked",eventLabel:void 0,eventValue:void 0,eventProperty:void 0}),setTimeout(()=>{document.querySelector("#dateInput-to").click()},200),document.querySelector(\'label[for="search-mask-trip-mode-roundtrip-toggle"]\').click()}),n.childElementCount<5?n.append(r):n.insertBefore(r,n.childNodes[4])})();',`((d)=>{if(!d.getElementById("fxp-cd8455ad-1335-442b-912c-61583af36f98")){var s=d.createElement("style");s.id="fxp-cd8455ad-1335-442b-912c-61583af36f98";d.head.appendChild(s).innerText='html{scroll-behavior:smooth}.fxp1594-banner{margin:0 0 var(--hcr-spacing-2) 0;padding:var(--hcr-spacing-2) var(--hcr-spacing-3) var(--hcr-spacing-2) 6px;background:var(--hcr-bg-primary-color);border:1px solid var(--hcr-grayscale-30-color);border-radius:var(--hcr-primary-border-radius);position:relative;display:flex;cursor:pointer;align-items:center}.fxp1594-banner:hover{box-shadow:var(--flix-primary-box-shadow)}.fxp1594-bus{height:75px;padding-right:6px}.fxp1594-text{margin:auto 0}.fxp1594-text .flix-text{margin:0}.fxp1594-arrow{height:24px;margin:0 -6px 0 -3px}.fxp1594-button-container{margin-left:auto}';}})(document);`]],webc_fxp_1598:{1:[],0:[]},webc_station_location_map:[[],[]],webc_fxp_1689:[[],[`((d)=>{if(!d.getElementById("fxp-23d6d295-5007-4c32-88ba-1540fadd91bd")){var s=d.createElement("style");s.id="fxp-23d6d295-5007-4c32-88ba-1540fadd91bd";d.head.appendChild(s).innerText='button[class*=seats-module-selectable]:not([class*="seats-module-selected"]),div[class*=seatCategories-module-seatLegendIconActive]{background-color:var(--flix-highlight-color)}';}})(document);`],[`((d)=>{if(!d.getElementById("fxp-528f3b47-df79-4063-aa4f-27c76f3f69b4")){var s=d.createElement("style");s.id="fxp-528f3b47-df79-4063-aa4f-27c76f3f69b4";d.head.appendChild(s).innerText='[class*=seats-module-unselectableIcon] svg{fill:var(--flix-danger-dark-color)}';}})(document);`],[`((d)=>{if(!d.getElementById("fxp-39705cba-eddc-4d97-9e7f-2cd7b8d6ee86")){var s=d.createElement("style");s.id="fxp-39705cba-eddc-4d97-9e7f-2cd7b8d6ee86";d.head.appendChild(s).innerText='button[class*=seats-module-selectable]:not([class*="seats-module-selected"]),div[class*=seatCategories-module-seatLegendIconActive]{background-color:var(--flix-highlight-color)}[class*=seats-module-unselectableIcon] svg{fill:var(--flix-danger-dark-color)}';}})(document);`]],webc_show_price_without_fee:{1:[],2:[]},webc_fxp_1705:[[],[]],webc_fxp_1713:[[],[]],webc_fxp_1715:[[],[]],webc_fxp_1720:[[],[],[]],webc_fxp_1730:[[],[`((d)=>{if(!d.getElementById("fxp-4b406f78-083f-4201-aec6-f7028de04dd0")){var s=d.createElement("style");s.id="fxp-4b406f78-083f-4201-aec6-f7028de04dd0";d.head.appendChild(s).innerText='#search-mask-component *>[data-product-type=bike_slot]{display:none}';}})(document);`]],webc_fxp_1731:[[],['(()=>{const o=globalEventsCache.filter(t=>t.name==="search.results.results_visible"),i=o[o.length-1];if(window.fxp1731===i)return;window.fxp1731=i,c();async function c(){const t="https://global.api-dev.flixbus.com/bestseller/v1/score",r=d(),n=performance.now();try{const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=performance.now()-n;if(!a.ok)throw new Error(`API error: ${a.status}`);dataLayer.push({event:"ga_event",eventCategory:"ABTest",eventAction:"fxp1731_response_time",eventLabel:`${s}ms`})}catch(a){dataLayer.push({event:"ga_event",eventCategory:"ABTest",eventAction:"fxp1731_error",eventLabel:a.message})}}function d(){const t=globalEventsCache.filter(e=>e.name==="search.results.results_visible"),r=t[t.length-1];if(!r)return null;const n=r.payload[0],a=n.results.map(e=>{const s=e.legs[0],l=e.legs[e.legs.length-1],p=e.duration.hours*60+e.duration.minutes;return{tripId:e.uid,duration:p,price:e.price.total,firstDepartureStationId:s.departure.stationId,lastArrivalStationId:l.arrival.stationId,numLegs:e.legs.length,meansOfTransport:e.legs.map(m=>m.vehicle.category),firstDepartureDateTime:s.departure.date,lastArrivalDateTime:l.arrival.date}}).filter(e=>e.price>0);return{departureCityId:n.searchInfo.fromCity.id,arrivalCityId:n.searchInfo.toCity.id,searchDateTime:Math.floor(new Date().getTime()/1e3),searchResults:a}}})();']],webc_fxp_1732:[[],['window.fxp1732||(window.fxp1732=!0,formbricks.track("fxp1732_DE_V4"));',`(()=>{const t=document.querySelector('label[for="aw2637eohg2jpmlcqc2flsa3"]');if(!t)return;const e=t.parentElement.querySelector('button[tabindex="1"]');!e||window.fxp1732Listener||(window.fxp1732Listener=!0,e.addEventListener("click",function(){window.open(getLink(),"_blank").focus()}))})();function getLink(){const t=extractAndValidateEmail(),n=getFirstPassengerFirstName(),e=getNetworkId();if(!t||!n||!e)return console.log(t,n,e),"https://de.trustpilot.com/evaluate/flixbus.de";let r="https://geo.cro.flixbus.com/trustpilot/invitation-link";const s=new URLSearchParams({domain:"flixbus_de",token:"clv3r6ha8ld5Sq208la3rg21x91",name:n,email:t,network_userid:e});return r+="?"+s.toString(),console.log(r),r}function extractAndValidateEmail(){const t=localStorage.getItem("persist:contact");if(t)try{const e=JSON.parse(t).email.replace(/"/g,"");return/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e)?e:null}catch(n){return null}else return null}function getFirstPassengerFirstName(){try{const t=localStorage.getItem("persist:passenger"),n=JSON.parse(t),e=JSON.parse(n.passengers);return e&&e.length>0?e[0].firstName:null}catch(t){return null}}function getNetworkId(){const t=document.cookie.split(";").map(e=>e.trim());let n="";return t.reduce((e,r)=>{const[s,o]=r.split("=");s.startsWith("_sp_id.")&&(n=o)},{}),n.substr(0,n.indexOf("."))};`]],webc_book_cart_trip_ab_test:{0:[],8:[]},webc_fxp_1767:[[],[]],webc_fxp_1771:[[],['(()=>{if(window.fxp1618)return;let s;switch(window.location.hostname){case"shop.flixbus.com":case"shop.global.flixbus.com":s="fxp1618_us";break;case"shop.greyhound.com":s="fxp1618_gh";break;case"shop.flixbus.co.uk":s="fxp1618_uk";break;case"shop.flixbus.fr":s="fxp1618_fr";break;case"shop.flixbus.it":s="fxp1618_it";break;case"shop.flixbus.dk":s="fxp1618_dk";break;default:return!1}window.fxp1618=!0,formbricks.track(s)})();']]};let o={};const l={attributes:!0,childList:!0,subtree:!0},p=(e,a)=>{a.disconnect(),u(),a.observe(n.body,l)};new MutationObserver(p).observe(n.body,l);const d=e=>{Object.keys(e).forEach(a=>{const r=String(a),c=String(e[a]);o[r]=c}),u()},u=()=>{Object.keys(o).forEach(e=>{let a=e,r=o[e];f(a,r)})},f=(e,a)=>{if(!!o[e]){if(!s[e]){t.fxp[e]===void 0&&(t.fxp[e]=null);return}if(!h(e)){t.fxp[e]===void 0&&(t.fxp[e]=!1);return}b(e,a),s[e]&&(!s[e][a]||s[e][a].forEach(r=>{try{new Function(r)()}catch(c){console.warn(e,c)}}))}},h=e=>{if(!i[e])return!0;try{return new Function(i[e])()}catch(a){console.warn(e,a)}},b=(e,a)=>{t.fxp[e]!==a&&(t.dataLayer.push({event:"ab_cc",ab_cc_id:e,ab_cc_v:a,ab_cc_src:"fxp"}),t.fxp[e]=a,typeof t.globalEvents=="object"&&t.globalEvents.emit("flixperiments",{[e]:a}))};if(n.location.host.slice(0,5)==="shop."&&n.location.pathname==="/")return;const x=()=>t.globalEvents.on("*.ab_test_flags",e=>d(e)),g=()=>{if(!t.globalEventsCache||!t.globalEventsCache.length)return!1;t.globalEventsCache.filter(e=>e.name.match(/ab_test_flags$/g)).forEach(e=>d(e.payload[0]))},m=setInterval(()=>{typeof t.globalEvents=="object"&&(clearInterval(m),x(),g())},200)})(window,document);